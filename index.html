<!DOCTYPE html><html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FIK STORE</title>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-storage-compat.js"></script>
  <style>
    body { font-family: sans-serif; background: #f9f9f9; margin: 0; padding: 0; color: #333; }
    header { background: #0b60b0; color: white; text-align: center; padding: 1rem; }
    header img { height: 100px; }
    main { padding: 1rem; }
    .produk { background: white; border-radius: 10px; padding: 1rem; margin-bottom: 1.5rem; box-shadow: 0 0 10px rgba(0,0,0,0.05); }
    button { background: #0b60b0; color: white; padding: 0.5rem 1rem; border: none; border-radius: 5px; cursor: pointer; margin-top: 0.5rem; }
    input, select { width: 100%; padding: 0.5rem; margin: 0.5rem 0; border-radius: 5px; border: 1px solid #ccc; }
    #bukti-upload { margin: 1rem 0; }
  </style>
</head>
<body>
  <header>
    <img src="logo-fikstore.png" alt="FIK STORE">
    <h1>FIK STORE</h1>
  </header>
  <main>
    <div class="produk">
      <h2>Bot WhatsApp 5GB</h2>
      <p>Harga: Rp2.000</p>
      <button onclick="checkout('Bot WhatsApp 5GB', 'Rp2.000')">Checkout</button>
    </div>
    <div id="checkoutForm" class="produk" style="display:none">
      <h2>Checkout</h2>
      <p id="produkNama"></p>
      <input type="text" id="nama" placeholder="Nama Anda">
      <input type="tel" id="wa" placeholder="Nomor WhatsApp">
      <select id="metode">
        <option value="">Pilih Metode</option>
        <option value="qris">QRIS</option>
        <option value="dana">Dana</option>
        <option value="gopay">GoPay</option>
      </select>
      <input type="file" id="bukti-upload" accept="image/*">
      <button onclick="kirimCheckout()">Kirim Bukti & Checkout</button>
    </div>
  </main>
  <script>
    const firebaseConfig = {
      apiKey: "",
      authDomain: "",
      databaseURL: "https://fikstore-id-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "fikstore-id",
      storageBucket: "fikstore-id.appspot.com",
      messagingSenderId: "",
      appId: ""
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const storage = firebase.storage();let produkDipilih = "";
let hargaDipilih = "";

function checkout(nama, harga) {
  produkDipilih = nama;
  hargaDipilih = harga;
  document.getElementById("produkNama").innerText = `${nama} - ${harga}`;
  document.getElementById("checkoutForm").style.display = "block";
  window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
}

async function kirimCheckout() {
  const nama = document.getElementById("nama").value.trim();
  const wa = document.getElementById("wa").value.trim();
  const metode = document.getElementById("metode").value;
  const file = document.getElementById("bukti-upload").files[0];
  if (!nama || !wa || !metode || !file) return alert("Harap lengkapi semua data dan upload bukti.");

  const fileRef = storage.ref(`bukti/${Date.now()}_${file.name}`);
  await fileRef.put(file);
  const fileUrl = await fileRef.getDownloadURL();

  const data = { nama, wa, produk: produkDipilih, harga: hargaDipilih, metode, bukti: fileUrl, timestamp: Date.now() };
  await db.ref("transaksi").push(data);

  const pesan = `Halo Admin, saya sudah bayar.

Nama: ${nama} Nomor: ${wa} Produk: ${produkDipilih} Harga: ${hargaDipilih} Metode: ${metode} Bukti: ${fileUrl}; window.open(https://wa.me/6287734818302?text=${encodeURIComponent(pesan)}`, '_blank'); alert("Checkout berhasil, silakan tunggu konfirmasi."); document.getElementById("checkoutForm").reset(); } </script>

</body>
</html>
